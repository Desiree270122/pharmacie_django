{% load static %}
<!DOCTYPE html>
<html lang="en">
<!-- Basic -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Site Metas -->
    <title>PHARMA - SERVICES</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Site CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}"> 
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    {% block  header %}
      {% include "header.html" %}
    {% endblock  %}

    <!-- Start Top Search -->
    <div class="top-search">
        <div class="container">
            <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-search"></i></span>
                <input type="text" class="form-control" placeholder="Search">
                <span class="input-group-addon close-search"><i class="fa fa-times"></i></span>
            </div>
        </div>
    </div>
    <!-- End Top Search -->

    <!-- Start All Title Box -->
    <div class="all-title-box">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Nous contacter</h2>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Accueil</a></li>
                        <li class="breadcrumb-item active"> Nous contacter </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End All Title Box -->

    <!-- Start Nous contacter  -->
<div class="contact-box-main py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-sm-12 mb-4">
                <div class="contact-form-right card shadow-sm border-0 p-4">
                    <h2 class="text-center mb-4">Écrivez-nous</h2>
                    <p class="text-center text-muted mb-4">Remplissez le formulaire ci-dessous pour toutes demandes ou questions.</p>
                    <form id="contactForm" method="post" action="{% url 'message_contact' %}">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="name">Nom complet</label>
                            <input type="text" class="form-control noms_complet" id="name" name="noms_complet" placeholder="Votre nom complet" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Adresse e-mail</label>
                            <input type="email" placeholder="Votre adresse mail" id="email" class="form-control email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Numéro de téléphone</label>
                            <input type="tel" placeholder="Votre numéro de téléphone" id="phone" class="form-control telephone" name="telephone" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Votre message</label>
                            <textarea class="form-control message" id="message" placeholder="Votre message" rows="5" required></textarea>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-primary btn-lg rounded-pill px-5" id="submit" type="submit">Envoyer le message</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-lg-4 col-sm-12">
                <div class="contact-info-left card shadow-sm border-0 p-4">
                    <h2 class="card-title">Info de contact</h2>
                    <ul class="list-unstyled mt-4">
                        <li class="mb-3">
                            <i class="fas fa-map-marker-alt mr-2 text-primary"></i>
                            <strong>Adresse :</strong> 144 Xuan Thuy, Cau Giay, Hanoi, Vietnam
                        </li>
                        <li class="mb-3">
                            <i class="fas fa-phone-square mr-2 text-primary"></i>
                            <strong>Téléphone :</strong> <a href="tel:+84862104473">+84 862 104 473</a>
                        </li>
                        <li>
                            <i class="fas fa-envelope mr-2 text-primary"></i>
                            <strong>Email :</strong> <a href="mailto:pharmaciedubienetre@gmail.com">mailto:pharmaciedubienetre@gmail.com</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Contact Box -->


    {% block  footer %}
      {% include "footer.html" %}
    {% endblock  %}

    <!-- ALL JS FILES -->
    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- ALL PLUGINS -->
    <script src="{% static 'js/jquery.superslides.min.js' %}"></script>
    <script src="{% static 'js/bootstrap-select.js' %}"></script>
    <script src="{% static 'js/inewsticker.js' %}"></script>
    <script src="{% static 'js/bootsnav.js' %}."></script>
    <script src="{% static 'js/images-loded.min.js' %}"></script>
    <script src="{% static 'js/isotope.min.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/baguetteBox.min.js' %}"></script>
    <script src="{% static 'js/form-validator.min.js' %}"></script>
    <!--script src="{% static 'js/contact-form-script.js' %}"></script-->
    <script src="{% static 'js/custom.js' %}"></script>
    <script>
        $("#contactForm").validator().on("submit", function (event) {
            if (event.isDefaultPrevented()) {
                // handle the invalid form...
                formError();
                submitMSG(false, "Did you fill in the form properly?");
            } else {
                // everything looks good!
                event.preventDefault();
                submitForm();
            }
        });
        
        
        function submitForm(){
            // Initiate Variables With Form Content
            var noms_complet = $(".noms_complet").val();
            var email = $(".email").val();
            var telephone = $(".telephone").val();
            var message = $(".message").val();
        
            $.ajax(
                {
                    type:"POST",
                    url: "message_contact",
                    dataType:"json",
                    data:{noms_complet:noms_complet, telephone:telephone, email:email,message:message, csrfmiddlewaretoken:"{{csrf_token}}"},
                    success: function(response) 
                    {
                        if (response.status == 1){
                            formSuccess();
                        } else {
                            formError();
                            submitMSG(false,text);
                        }
                    }
                });
        }
        
        function formSuccess(){
            $("#contactForm")[0].reset();
            submitMSG(true, "Message Submitted!")
        }
        
        function formError(){
            $("#contactForm").removeClass().addClass('shake animated').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
                $(this).removeClass();
            });
        }
        
        function submitMSG(valid, msg){
            if(valid){
                var msgClasses = "h3 text-center tada animated text-success";
            } else {
                var msgClasses = "h3 text-center text-danger";
            }
            $("#msgSubmit").removeClass().addClass(msgClasses).text(msg);
        }
    </script>
</body>

</html>